# Undo 
- [1. 編集中 -> 最新コミット](#1-編集中---最新コミット)
- [2. stage -> worktree](#2-stage---worktree)
  - [2.1. ステージに間違えて上げてしまったファイルの打ち消し方法](#21-ステージに間違えて上げてしまったファイルの打ち消し方法)
- [3. commit ->](#3-commit--)
  - [3.1. コミットの取り消し](#31-コミットの取り消し)
  - [3.2. コミットの打ち消し](#32-コミットの打ち消し)
  - [3.3. コミットの上書き](#33-コミットの上書き)

## 1. 編集中 -> 最新コミット

```bash
git checkout FILE_NAME
```

編集中のファイルを最新のコミットに戻したい時に使用する

## 2. stage -> worktree

### 2.1. ステージに間違えて上げてしまったファイルの打ち消し方法

```bash
git reset FILE_NAME
```

コミットの前のステージにファイルを上げてしまった際の取り消し方法である。  
よくやるのが、`git add ./` 等のコマンドでまとめてステージングしてしまうことがある。 

## 3. commit -> 

### 3.1. コミットの取り消し

```bash
git reset --soft HEAD^
```
を叩けばOK。

- `--soft`オプション：ワークディレクトリの内容はそのままでコミットだけを取り消したい場合に使用。
- `--hard`オプション：コミット取り消した上でワークディレクトリの内容も書き換えたい場合に使用。


- `HEAD^`：直前のコミットを意味する。
- `HEAD~{n}` ：n個前のコミットを意味する。
  - `HEAD^`や`HEAD~{n}`の代わりにコミットのハッシュ値を書いても良い。
  - gitのv1.8.5からは、「HEAD」のエイリアスとして「＠」が用意されている。
  - `HEAD~`と`HEAD^`と`@^`は同じ意味。
  - `HEAD^^^`と`HEAD~3`と`HEAD~~~`と`HEAD~{3}`と`@^^^`は同じ意味。

`git reset`の詳細は、下記記事に詳しく書いているので、ぜひ参考にされてください。

▼[git reset (--hard/--soft)]ワーキングツリー、インデックス、HEADを使いこなす方法
https://qiita.com/shuntaro_tamura/items/db1aef9cf9d78db50ffe

### 3.2. コミットの打ち消し

`push`しているコミットに対して行う場合は以下

作業ツリーを指定したコミット時点の状態にまで戻し、コミットを行う（コミットをなかったことにはせず、逆向きのコミットをすることで履歴を残す）には、以下を叩けばOK。

```
git revert コミットのハッシュ値
```

指定したコミットを打ち消すコミットを作成することができます。
コレを行う必要性は、リモートブランチの最新リポジトリを作業している人が迷子にならないようにするためである。
`reset`により取り消しだと、最新リポジトリがリモートから消えしまう。

### 3.3. コミットの上書き
直前のコミットに上書きするには、

```
git commit --amend
```
を叩けばOK。

- コミットメッセージを変更したい時よく使う。
- 「`git rebase`失敗した時、コンフリクトを避けるためにコミットを上書きする」という使い方もよくする。

参考:<https://qiita.com/shuntaro_tamura/items/06281261d893acf049ed>